# Nova - Metrics/Registering-Metrics

*Source: https://nova.laravel.com/docs/v5/metrics/registering-metrics*

---

Registering Metrics - Laravel Nova
              document.documentElement.style.setProperty('--font-family-headings-custom', 'Figtree');
              document.documentElement.style.setProperty('--font-weight-headings-custom', '');
              document.documentElement.style.setProperty('--font-family-body-custom', 'Figtree');
              document.documentElement.style.setProperty('--font-weight-body-custom', '');
            
    (function() {
      try {
        var bannerKey = "nova-laravel-bannerDismissed";
        var bannerContent = undefined;
        
        if (!bannerContent) {
          document.documentElement.setAttribute('data-banner-state', 'hidden');
          return;
        }
        
        var dismissedValue = localStorage.getItem(bannerKey);
        var shouldShowBanner = !dismissedValue || dismissedValue !== bannerContent;
        
        document.documentElement.setAttribute('data-banner-state', shouldShowBanner ? 'visible' : 'hidden');
      } catch (e) {
        document.documentElement.setAttribute('data-banner-state', 'hidden');
      }
    })();
  :root{--font-inter:'Inter', 'Inter Fallback';--font-jetbrains-mono:'JetBrains Mono', 'JetBrains Mono Fallback'}((e,i,s,u,m,a,l,h)=>{let d=document.documentElement,w=["light","dark"];function p(n){(Array.isArray(e)?e:[e]).forEach(y=>{let k=y==="class",S=k&&a?m.map(f=>a[f]||f):m;k?(d.classList.remove(...S),d.classList.add(a&&a[n]?a[n]:n)):d.setAttribute(y,n)}),R(n)}function R(n){h&&w.includes(n)&&(d.style.colorScheme=n)}function c(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)p(u);else try{let n=localStorage.getItem(i)||s,y=l&&n==="system"?c():n;p(y)}catch(n){}})("class","isDarkMode","system",null,["dark","light","true","false","system"],{"true":"dark","false":"light","dark":"dark","light":"light"},true,true):root {
    --primary: 75 162 227;
    --primary-light: 75 162 227;
    --primary-dark: 75 162 227;
    --background-light: 255 255 255;
    --background-dark: 10 12 15;
    --gray-50: 245 247 249;
    --gray-100: 240 242 244;
    --gray-200: 224 227 229;
    --gray-300: 208 210 212;
    --gray-400: 160 163 165;
    --gray-500: 114 116 118;
    --gray-600: 82 84 86;
    --gray-700: 64 67 69;
    --gray-800: 39 42 44;
    --gray-900: 25 27 29;
    --gray-950: 12 15 17;
  }h1, h2, h3, h4 {
    font-weight: 600 !important;
}

.codeblock-dark div:not(:last-child) {
    color: #fafafa;
}

#footer > div > div:nth-of-type(n+2) {
    display: none;
}Laravel Nova home pagev5Search...⌘KAsk AISupportPlatform StatusDashboardDashboardSearch...NavigationMetricsRegistering MetricsDocumentationKnowledge BaseCommunityBlogGet StartedInstallationRelease NotesUpgrade GuideResourcesThe BasicsFieldsDependent FieldsDate FieldsFile FieldsRepeater FieldsField PanelsRelationshipsValidationAuthorizationSearchThe BasicsGlobal SearchScout IntegrationFiltersDefining FiltersRegistering FiltersLensesDefining LensesRegistering LensesActionsDefining ActionsRegistering ActionsMetricsDefining MetricsRegistering MetricsDigging DeeperDashboardsMenusNotificationsAuthenticationImpersonationToolsResource ToolsCardsFieldsFiltersCSS / JavaScriptAssetsLocalizationStubsMetricsRegistering MetricsLearn how to register metrics in Nova.​Overview
Once you have defined a metric, you are ready to attach it to a resource. Each resource generated by Nova contains a cards method. To attach a metric to a resource, you should simply add it to the array of metrics / cards returned by this method:
ConstructMakeCopyAsk AIuse App\Nova\Metrics\UsersPerDay;
use Laravel\Nova\Http\Requests\NovaRequest;

// ...

/**
 * Get the cards available for the resource.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(NovaRequest $request): array
{
    return [
        new UsersPerDay,
    ];
}

​Detail Metrics
In addition to placing metrics on the resource index page, you may also attach a metric to the resource detail page. For example, if you are building a podcasting application, you may wish to display the total number of podcasts created by a specific user over time. To instruct a metric to be displayed on the detail page instead of the index page, invoke the onlyOnDetail method when registering your metric:
app/Nova/~Resource.phpCopyAsk AIuse Laravel\Nova\Http\Requests\NovaRequest;

// ...

/**
 * Get the cards available for the request.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(NovaRequest $request): array
{
    return [
        Metrics\PodcastCount::make()
            -&gt;onlyOnDetail(),
    ];
}

Of course, you will need to modify your metric’s query to only gather metric data on the resource for which it is currently being displayed. To accomplish this, your metric’s calculate method may access the resourceId property on the incoming $request:
app/Nova/Metrics/~Metric.phpCopyAsk AIuse App\Models\Podcast;
use Laravel\Nova\Http\Requests\NovaRequest;
use Laravel\Nova\Metrics\TrendResult;

// ...

/**
 * Calculate the value of the metric.
 */
public function calculate(NovaRequest $request): TrendResult
{
    return $this-&gt;count(
        $request, 
        Podcast::where(&#x27;user_id&#x27;, $request-&gt;resourceId)
    );
}

​Dashboard Metrics
You are also free to add metrics to your primary Nova “dashboard”, which is the default page that Nova displays after login. By default, this page displays some helpful links to the Nova documentation via the built-in Help card. To add a metric to your dashboard, add the metric to the array of cards returned by the cards method of your Dashboard class:
app/Nova/Dashbaords/~Dashboard.phpCopyAsk AIuse App\Nova\Metrics\NewUsers;

// ...

/**
 * Get the cards that should be displayed on the Nova dashboard.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(): array
{
    return [
        new NewUsers,
    ];
}

​Authorization
If you would like to only expose a given metric to certain users, you may invoke the canSee method when registering your metric. The canSee method accepts a closure which should return true or false. The closure will receive the incoming HTTP request:
CopyAsk AIuse App\Models\User;
use App\Nova\Metrics\UsersPerDay;

// ...

UsersPerDay::make()
    -&gt;canSee(function ($request) {
        return $request-&gt;user()-&gt;can(&#x27;viewUsersPerDay&#x27;, User::class);
    }),

In the example above, we are using Laravel’s Authorizable trait’s can method on our User model to determine if the authorized user is authorized for the viewUsersPerDay action. However, since proxying to authorization policy methods is a common use-case for canSee, you may use the canSeeWhen method to achieve the same behavior. The canSeeWhen method has the same method signature as the Illuminate\Foundation\Auth\Access\Authorizable trait’s can method:
CopyAsk AIuse App\Models\User;
use App\Nova\Metrics\UsersPerDay;

// ...

UsersPerDay::make()
    -&gt;canSeeWhen(
        &#x27;viewUsersPerDay&#x27;, User::class
    ),

​Default Metric Range
You may wish to initially load a certain metric range by default. You can pass the range’s array key to the defaultRange method of the metric to accomplish this:
app/Nova/~Resource.phpCopyAsk AIuse Laravel\Nova\Http\Requests\NovaRequest;

// ...

/**
 * Get the cards available for the request.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(NovaRequest $request): array
{
    return [
        Metrics\NewUsers::make()
            -&gt;defaultRange(&#x27;YTD&#x27;),
    ];
}

​Metric Sizes
By default, metrics take up one-third of the Nova content area. However, you are free to make them larger. To accomplish this, call the width method when registering the metric:
app/Nova/~Resource.phpCopyAsk AIuse Laravel\Nova\Http\Requests\NovaRequest;

// ...

/**
 * Get the cards available for the request.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(NovaRequest $request): array
{
    return [
        // Two-thirds of the content area...
        Metrics\UsersPerDay::make()-&gt;width(&#x27;2/3&#x27;),

        // Full width...
        Metrics\UsersPerDay::make()-&gt;width(&#x27;full&#x27;),
    ];
}

When the metric width is set to full, the height of the card will become dynamic. You may explicitly define this behaviour by calling the fixedHeight or dynamicHeight methods:
app/Nova/~Resource.phpCopyAsk AIuse Laravel\Nova\Http\Requests\NovaRequest;

// ...

/**
 * Get the cards available for the request.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(NovaRequest $request): array
{
    return [
        Metrics\UsersPerDay::make()-&gt;width(&#x27;full&#x27;)-&gt;fixedHeight(),
        Metrics\UsersPerDay::make()-&gt;width(&#x27;full&#x27;)-&gt;dynamicHeight(),
    ];
}

​Metric Help Text / Tooltips
Sometimes a metric needs to offer the user more context about how the value is calculated or other details related to the metric’s value. To provide this context, Nova allows you to define a help text “tooltip”, which can be registered similarly to Field Help Text:

To enable the tooltip, invoke the help method while registering your metric. The help method receives the help text as its only argument:
app/Nova/~Resource.phpCopyAsk AIuse Laravel\Nova\Http\Requests\NovaRequest;

// ...

/**
 * Get the cards available for the request.
 *
 * @return array&lt;int, \Laravel\Nova\Card&gt;
 */
public function cards(NovaRequest $request): array
{
    return [
        Metrics\TotalUsers::make()
            -&gt;help(&#x27;This is calculated using all users that are active and not banned.&#x27;),
    ];
}

You may also use HTML when defining your help text. For example, you may pass a rendered Blade template to the help method:
CopyAsk AIuse App\Nova\Metrics\TotalUsers;

// ...

TotalUsers::make()
    -&gt;help(view(&#x27;nova.metrics.total-users.tooltip&#x27;)-&gt;render()),

​Refreshing Metrics
Laravel Nova will automatically fetch updated results 